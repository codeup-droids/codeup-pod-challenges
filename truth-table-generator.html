<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        #backgroundimage{
            height: 500px;
            background-image: url('campaign_misscleo-20160726093844190.jpg');
           background-size: 100% 100%;
            /*opacity: .5;*/
        }

        .container{
            width: 17em;
            height: 17em;
        }
        .miss-cleo{
            display: none;
        }


    </style>
</head>
<body>

<audio id="myAudio">
    <source src="baby-cakes.mp3" type="audio/ogg">
</audio>
<audio id="herAudio">
    <source src="believe-cleo.mp3" type="audio/ogg">
</audio>
<audio id="bad-move">
    <source src="dont-do-it.mp3" type="audio/ogg">
</audio>

<div id="backgroundimage">

</div>
<div class="jumbotron">
    <h1 class="display-4">Truth Table Generator! </h1>
    <p class="lead">Enter variables separated by commas. Then enter a proposition (currently limited to one connective (more to come!)). </p>
    <hr class="my-4">
    <input id="name_counter" class='mx-3' autofocus type="text">
    <button id="addNames">add names</button>
    <p id="hover" class="d-inline mx-1 text-danger"><sup>Powered by Miss Cleo</sup><img src="hqdefault.jpg" class="miss-cleo" id="miss-cleo" alt=""></p>
</div>




<!--<label for="name_counter">Please input variables separated by commas:</label>-->


<div class="border bg-light rounded text-center container">
    <div>
        <input class="border m-2 input-field" id="Input_Field" type="text" name="equation">
    </div>
    <div id ='names'>

    </div>
    <form action="">
        <div class="">
            <button class="btn m-1 btn-dark connective_btn" id="or" onclick="input(' v ')" value="||" type="button">or</button>
            <button class="btn m-1 btn-dark connective_btn" id="if_then" onclick="input(' -> ')" value="if" type="button">-></button>
            <button class="btn m-1 btn-dark connective_btn" id="if&onlyif" onclick="input(' <-> ')" value="<>" type="button"><-></button>
            <button class="btn m-1 btn-dark connective_btn" id="and" onclick="input(' & ')" value="&&" type="button">&</button>

        </div>
        <div >
            <button class="btn m-1 btn-dark connective_btn" id="not" onclick="input('~')" value="!" type="button">~</button>
            <button class="btn m-1 btn-dark operator_btn" id="openParenthesis" onclick="input(',(')" value="(" type="button">(</button>
            <button class="btn m-1 btn-dark operator_btn" id="closeParenthesis" onclick="input('),')" value=")" type="button">)</button>
            <button class="btn m-1 btn-dark operator_btn" id="entails" onclick="input(' &#8872; ')" value="&#8872;" type="button">&#8872;</button>

        </div>
    </form>
    <button class="w-100 align-self-baseline" type='reset' id="clear" onclick="document.getElementById('Input_Field').value=''" value="reset">Clear and Start over</button>
    <button id="generate" class="w-100 align-self-baseline" type="submit">Free Psychic Reading</button>
</div>

<div >
    <table class="table table-bordered table-striped" id="truthTable">
        <thead class="thead-dark" id="header"></thead>

    </table>
</div>

<script src="jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script>

    var inputArray =[];
    var inputArrToStr;
    var nameArray = '';
    var headArray = [];
    var backupInputArray;

    /*displays button values in input field*/
    function input(n) {
        inputArray.push(n);
        inputArrToStr = inputArray.join('');
        var inputs = $('#Input_Field:text').val(inputArrToStr);
        console.log(inputArrToStr)
        return inputArrToStr;
    }


    /*adds buttons for name inputs*/
    function numOfNames() {
        var items = $('#name_counter').val();
        var noSpace = items.replace(/\s+/g, '');
        nameArray = noSpace.split(',');
        for(var i=0;i<nameArray.length; i++){
            var listText = nameArray[i];

            var attribute = '' + nameArray[i] + '';

            $("#names").append('<button class="btn m-1 btn-dark clear_btn" onclick=input(' + "'" + attribute + "'" + ')>' + listText + '</button>');
        }
        console.log(nameArray);
        console.log(inputArray);
        console.log(inputArrToStr);
        return nameArray

    }


/*builds table head and table rows*/
    function buildTable(){
        inputArray = inputArrToStr.split(',');
        let rowNum = Math.pow(2, nameArray.length);
        headArray = nameArray;

        for (let i=0; i<inputArray.length; i++){
            if(inputArray !== ''){
                headArray.push(inputArray[i]);
            }
        } headArray.forEach(function(element, index) {
            $('#header').append('<th>' + element + '</th>')
        });
        for( i=0; i<rowNum; i++){
            /* tr = document.createElement('TR');*/
            $('#truthTable').append('<tr class="truthData" id="' + i + '"></tr>');
        }
        makeData(headArray);
    }


/*truthobject and determines the connective*/
    var truthObject = {}
    var str2Arr = []
    function makeData(headArray){
        let input = headArray.length;

            if(input === 2) {
                 truthObject = {
                    A: ['T','F']
                };
            } else if(input === 3) {
                 truthObject = {
                    A: ['T', 'T', 'F', 'F'],
                    B: ['T', 'F', 'T', 'F',]
                }
            } else if(input === 4) {
                 truthObject = {
                    A: ['T', 'T', 'T', 'T', 'F', 'F', 'F', 'F'],
                    B: ['T', 'T', 'F', 'F', 'T', 'T', 'F', 'F'],
                    C: ['T', 'F', 'T', 'F', 'T', 'F', 'T', 'F']
                }
            } else if (input === 5) {
                 truthObject = {
                    A: ['T', 'T', 'T', 'T','T', 'T', 'T', 'T', 'F', 'F', 'F', 'F', 'F', 'F', 'F', 'F'],
                    B: ['T', 'T', 'T', 'T', 'F', 'F', 'F', 'F','T', 'T', 'T', 'T', 'F', 'F', 'F', 'F'],
                    C: ['T', 'T', 'F', 'F', 'T', 'T', 'F', 'F','T', 'T', 'F', 'F', 'T', 'T', 'F', 'F'],
                    D: ['T', 'F', 'T', 'F', 'T', 'F', 'T', 'F','T', 'F', 'T', 'F', 'T', 'F', 'T', 'F']
                }
            }

        var arr2Str = inputArray.join(' ');
        str2Arr = arr2Str.split(' ');
        var compares = [];
        var connective = '';
        for(i = 0; i<str2Arr.length; i++) {

            if (str2Arr[i] === 'v' || str2Arr[i] === '&' || str2Arr[i] === '->' || str2Arr[i] === '<->' ||  str2Arr[i] === '~' ) {
                connective = str2Arr[i];
            } else {
                compares.push(str2Arr[i].toUpperCase())
            }
        } console.log(compares);

        console.log(str2Arr);
        console.log(connective);
        console.log(inputArray);
        console.log(truthObject);
        evaluate(connective, truthObject, compares);
        return str2Arr;

    }


    /*decides which function*/
    function evaluate(connective, truthObject, compares) {
        switch(connective) {
            case 'v':
                orTable(truthObject, compares);
                break;
            case '&':
                andTable(truthObject, compares);
                break;
            case '->':
                ifTable(truthObject, compares);
                break;
            case '<->':
                ifandifTable(truthObject, compares);
                break;
            case'~':
                negation(truthObject, compares);
                break;
        }
        return compares;
    }

    /*makes table data for disjunction connective*/
    function orTable(truthObject, compares) {
        console.log(truthObject);
        cArray = []
        let length = Math.pow(2, headArray.length);
        for (let i = 0; i<length; i++){
            if (truthObject[compares[0]][i] === 'F' && truthObject[compares[1]][i] === 'F'){
                cArray.push('F')
            } else {
                cArray.push('T')
            }
        }
        putItOnAPage(cArray, length)
    }

/*makes table data for biconditional connective*/
    function ifandifTable(truthObject, compares) {
        var length = Math.pow(2, headArray.length);
        cArray =[];
        for (i=0; i<length; i++){
            if ((truthObject[compares[0]][i] === 'T' && truthObject[compares[1]][i] === 'T') || ((truthObject[compares[0]][i] === 'F' && truthObject[compares[1]][i] === 'F'))){
                cArray.push('T')
            } else {
                cArray.push('F')
            }
        } putItOnAPage(cArray, length)
    }

    /*makes table data for conjunction connective*/
    function andTable(truthObject, compares) {
        var length = Math.pow(2, headArray.length);
        cArray =[];
        for (i=0; i<length; i++){
            if (truthObject[compares[0]][i] === 'T' && truthObject[compares[1]][i] === 'T'){
                cArray.push('T')
            } else {
                cArray.push('F')
            }
        }
        putItOnAPage(cArray, length)
    }

    /*makes table data for conditional connective*/
    function ifTable(truthObject, compares) {
        console.log(compares);
        var length = Math.pow(2, headArray.length);
        cArray =[];
        for (i=0; i<length; i++){
            if (truthObject[compares[0]][i] === 'T' && truthObject[compares[1]][i] === 'F'){
                cArray.push('F')
            } else {
                cArray.push('T')
            }
        }
        putItOnAPage(cArray, length)
    }

    /*makes table data for conditional connective*/
    function negation(truthObject, compares) {
        var length = Math.pow(2, headArray.length);
        console.log(compares);
        cArray =[]
        for (let i=0; i<length; i++){
            if (truthObject[compares[0]][i] === 'T'){
                cArray.push('F')
            } else if (truthObject[compares[0]][i] === 'F'){
                cArray.push('T')
            }
        } putItOnAPage(cArray, length)
    }




    /*builds the actual truth table*/
    function putItOnAPage(cArray, length) {
        if (headArray.length === 2) {
            for (i=0; i<length; i++){
                $('#' + [i]).html('<td>' + truthObject.A[i] + '</td>')
                if (cArray[i] === 'T'){
                    $(`#${i}`).addClass('table-success')
                } else {
                    $(`#${i}`).addClass('table-danger')
                }
            }
        }
        if (headArray.length === 3) {
            for (i=0; i<length; i++) {
                $('#' + [i]).html('<td>' + truthObject.A[i] + '</td>' + '<td>' + truthObject.B[i] + '</td>' + '<td>' + cArray[i] +'</td>')
                if (cArray[i] === 'T'){
                    $(`#${i}`).addClass('table-success')
                } else {
                    $(`#${i}`).addClass('table-danger')
                }
            }
        }
        if (headArray.length === 4) {
            for(i=0; i<length; i++) {
                $('#' + [i]).html('<td>' + truthObject.A[i] + '</td>' + '<td>' + truthObject.B[i] + '</td>' + '<td>' + truthObject.C[i] +'</td>' + '<td>' + cArray[i] +'</td>')
                if (cArray[i] === 'T'){
                    $(`#${i}`).addClass('table-success')
                } else {
                    $(`#${i}`).addClass('table-danger')
                }
            }
        }
        if (headArray.length === 5) {
            for(i=0; i<length; i++) {
                $('#' + [i]).html('<td>' + truthObject.A[i] + '</td>' + '<td>' + truthObject.B[i] + '</td>' + '<td>' + truthObject.C[i] +'</td>' + '<td>' + truthObject.D[i] +'</td>' + '<td>' + cArray[i] +'</td>')
                console.log(cArray[i])
                if (cArray[i] === 'T'){
                    $(`#${i}`).addClass('table-success')
                } else {
                    $(`#${i}`).addClass('table-danger')
                }
            }
        }

    }

    /*sounds*/
    function playCleo(e){
        console.log(e);
        if(e.currentTarget.id === "addNames") {
            var audio = document.getElementById('myAudio');
            audio.play()
        } else if (e.currentTarget.id === "generate") {
             audio = document.getElementById('herAudio');
            audio.play()
        } else {
            audio = document.getElementById('bad-move');
            audio.play()
        }
    }
    /*clear button*/
    function clear(){


        inputArrToStr = '';
        nameArray = '';
        inputArray = []
        $('#header').html('')
        $('#truthTable').html('');
        return backupInputArray
    }


    $('#hover').click(function(){
        $('#miss-cleo').toggleClass('miss-cleo')
    });



    $('#generate').click(buildTable)
    /*$('#generate')*/.click(playCleo);


    $('#addNames').click(playCleo).click(numOfNames);
</script>
</body>
</html>



<!--
    var truthtable = [];
    var temptable =[]
    function somefunction(num) {
         temptable = [];
        for (var i = 0; i < num; i++) {
            for (var j = 0; temptable.length < Math.pow(2, num); j ++){
                temptable.push('T');
            }
            truthtable.push(temptable);
        }
    }


|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||Fun Problem: |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
* define a function that takes in an arr.length and returns this progression   ||||||||||||||||||||||||||||||||||||||||||||
length: 1 output= A: [t, f]                                                    ||||||||||||||||||||||||||||||||||||||||||||
length: 2 output= A: [t]*2, [f]*2] B: [t, f]*2                                 ||||||||||||||||||||||||||||||||||||||||||||
length: 3 output= A: [t*4, f*4] B: [[t*2, f*2]*2] C: [[t,f]*8]                 ||||||||||||||||||||||||||||||||||||||||||||
length: 4 output= A: [t*8, f*8] B: [[t*4, f*4]*2] C: [t*2, f*2]*4] D: [t,f]*16 ||||||||||||||||||||||||||||||||||||||||||||
etc.                                                                           ||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||



    -->